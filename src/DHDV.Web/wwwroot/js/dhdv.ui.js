(()=>{const f=document.querySelector('.pt-form'), s=f?.querySelector('.pt-search'); if(!s) return; let t; s.addEventListener('input',()=>{ clearTimeout(t); t=setTimeout(()=>{ f.requestSubmit(); },350) });})();
(()=>{const btn=document.getElementById('btnMore'); if(!btn) return; const list=document.getElementById('postList'); btn.addEventListener('click', async ()=> { const page=Number(btn.dataset.page||'1')+1; const pageSize=Number(btn.dataset.pagesize||'10'); btn.disabled=true; const prev=btn.textContent; btn.textContent='Đang tải...'; const res=await fetch(`News/More?page=${page}&pageSize=${pageSize}`,{headers:{'X-Requested-With':'XMLHttpRequest'}}); const html=await res.text(); if(html.trim().length===0){ btn.remove(); return;} const tmp=document.createElement('div'); tmp.innerHTML=html; [...tmp.children].forEach(el=>list.appendChild(el)); btn.dataset.page=page; btn.disabled=false; btn.textContent=prev; });})();